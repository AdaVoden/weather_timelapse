var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,l;function a(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function u(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(t){return null==t?"":t}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function $(){return m(" ")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function x(t){l=t}const k=[],_=[],w=[],A=[],S=Promise.resolve();let q=!1;function E(t){w.push(t)}let I=!1;const C=new Set;function T(){if(!I){I=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];x(e),j(e.$$)}for(x(null),k.length=0;_.length;)_.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];C.has(e)||(C.add(e),e())}w.length=0}while(k.length);for(;A.length;)A.pop()();q=!1,I=!1,C.clear()}}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const M=new Set;function N(t,e){t&&t.i&&(M.delete(t),t.i(e))}function W(t,n,o,c){const{fragment:l,on_mount:a,on_destroy:u,after_update:i}=t.$$;l&&l.m(n,o),c||E((()=>{const n=a.map(e).filter(s);u?u.push(...n):r(n),t.$$.on_mount=[]})),i.forEach(E)}function L(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(k.push(t),q||(q=!0,S.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,s,o,c,a,u,i,f=[-1]){const p=l;x(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:s.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||p.$$.root};i&&i(h.root);let m=!1;if(h.ctx=o?o(e,s.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=s)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](s),m&&D(e,t)),n})):[],h.update(),m=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);h.fragment&&h.fragment.l(t),t.forEach(d)}else h.fragment&&h.fragment.c();s.intro&&N(e.$$.fragment),W(e,s.target,s.anchor,s.customElement),T()}x(p)}class O{$destroy(){L(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=[];function z(t,e){return{subscribe:B(t,e).subscribe}}function B(e,n=t){let r;const s=new Set;function c(t){if(o(e,t)&&(e=t,r)){const t=!X.length;for(const t of s)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(o,l=t){const a=[o,l];return s.add(a),1===s.size&&(r=n(c)||t),o(e),()=>{s.delete(a),0===s.size&&(r(),r=null)}}}}const H=B(5);function P(t){let e;const n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(null),e=n.responseText,e}function R(e,n){return function(e,n,o){const c=!Array.isArray(e),l=c?[e]:e,a=n.length<2;return z(o,(e=>{let o=!1;const i=[];let f=0,p=t;const d=()=>{if(f)return;p();const r=n(c?i[0]:i,e);a?e(r):p=s(r)?r:t},h=l.map(((t,e)=>u(t,(t=>{i[e]=t,f&=~(1<<e),o&&d()}),(()=>{f|=1<<e}))));return o=!0,d(),function(){r(h),p()}}))}([e,n],(([t,e])=>function(t,e){const n=t,r=parseFloat(n.slice(2)),s=parseFloat(n.slice(0,2));return parseFloat(30*s+r/2)/e}(t,e)))}function G(e){let n,s,o,c,l,u,i,x,k,_,w,A,S,q,E,I,C,T,j,M,N,W=J(e[3])+"",L=e[4]?"play":"pause",D=J(e[5])+"";return{c(){n=h("div"),s=h("img"),c=$(),l=h("div"),u=h("div"),i=h("span"),x=m(W),k=$(),_=h("span"),w=m("click anywhere to "),A=m(L),S=m(" / drag to seek"),q=$(),E=h("span"),I=m(D),C=$(),T=h("progress"),y(s,"draggable","false"),a(s.src,o=e[7])||y(s,"src",o),y(s,"alt","Timelapse"),y(s,"class","svelte-13cfdq"),y(i,"class","time svelte-13cfdq"),y(_,"class","svelte-13cfdq"),y(E,"class","time svelte-13cfdq"),y(u,"class","info svelte-13cfdq"),T.value=j=e[3]/e[5]||0,y(T,"class","svelte-13cfdq"),y(l,"class","controls svelte-13cfdq"),v(l,"opacity",e[5]&&e[6]?1:0),y(n,"class","svelte-13cfdq")},m(t,r){var o;p(t,n,r),f(n,s),f(n,c),f(n,l),f(l,u),f(u,i),f(i,x),f(u,k),f(u,_),f(_,w),f(_,A),f(_,S),f(u,q),f(u,E),f(E,I),f(l,C),f(l,T),M||(N=[g(s,"mousemove",e[8]),g(s,"touchmove",(o=e[8],function(t){return t.preventDefault(),o.call(this,t)})),g(s,"mousedown",e[9]),g(s,"mouseup",e[10])],M=!0)},p(t,[e]){128&e&&!a(s.src,o=t[7])&&y(s,"src",o),8&e&&W!==(W=J(t[3])+"")&&b(x,W),16&e&&L!==(L=t[4]?"play":"pause")&&b(A,L),32&e&&D!==(D=J(t[5])+"")&&b(I,D),40&e&&j!==(j=t[3]/t[5]||0)&&(T.value=j),96&e&&v(l,"opacity",t[5]&&t[6]?1:0)},i:t,o:t,d(t){t&&d(n),M=!1,r(N)}}}function J(t){if(isNaN(t))return"...";const e=Math.floor(t/60);return(t=Math.floor(t%60))<10&&(t="0"+t),`${e}:${t}`}function K(e,n,r){let s,o,c,l,a=t,i=t,f=t;var p,d;p=H,d=t=>r(15,s=t),e.$$.on_destroy.push(u(p,d)),e.$$.on_destroy.push((()=>a())),e.$$.on_destroy.push((()=>i())),e.$$.on_destroy.push((()=>f()));let h,m,$,g,y,{allsky:b=!1}=n,v=0,x=!0;const k=1e3/s,_=k/1e3;let w,A,S=!0;function q(t){void 0!==g&&(g.pause(),r(4,x=!0)),h="/images/"+t+"/",r(1,$=function(t){return z(P(t),(function(e){const n=setInterval((async()=>{e(P(t))}),12e4);return function(){clearInterval(n)}}))}(h+"lastimage")),a(),a=u($,(t=>r(16,o=t))),r(0,m=R($,H)),i(),i=u(m,(t=>r(17,c=t))),r(5,y=c),r(3,v=0),r(2,g=function(){const{subscribe:t,set:e,update:n}=B(h+"0000.jpg");let c;function l(){c=setInterval((()=>{v<y&&(n((t=>function(t,e){t=t.split("/").at(-1),console.log(t),t=t.split(".")[0],e=e.split(".")[0];let n,r=parseInt(t)+2,s=parseInt(e);return(r-60)%100==0&&0!==r&&(r-=60,r+=100),r>=s&&(r=s),n=""+r,n=`${h}${n.padStart(4,"0")}.jpg`,n}(t,o))),r(3,v+=_))}),k)}function a(){clearInterval(c)}function u(t){t<0&&(t=0);let n=h+function(t,e,n){const r=t/e*(e*n*2);let s=parseInt(r%60);s%2==1&&(s-=1);const o=parseInt((r-s)/60),c=(""+s).padStart(2,"0");return(""+o).padStart(2,"0")+c+".jpg"}(t,y,s);e(n)}return{subscribe:t,play:()=>l(),pause:()=>a(),seek:t=>u(t)}}()),f(),f=u(g,(t=>r(7,l=t)))}return e.$$set=t=>{"allsky"in t&&r(11,b=t.allsky)},e.$$.update=()=>{2048&e.$$.dirty&&q(b?"AllSkyCamImages":"WeatherCamImages")},[m,$,g,v,x,y,S,l,function(t){if(clearTimeout(w),w=setTimeout((()=>r(6,S=!1)),2500),r(6,S=!0),!y)return;if("touchmove"!==t.type&&!(1&t.buttons))return;const e="touchmove"===t.type?t.touches[0].clientX:t.clientX,{left:n,right:s}=this.getBoundingClientRect();r(3,v=y*(e-n)/(s-n)),g.seek(v)},function(t){A=new Date},function(t){new Date-A<300&&(x?(r(4,x=!1),g.play()):(r(4,x=!0),g.pause()))},b]}class Q extends O{constructor(t){super(),F(this,t,K,G,o,{allsky:11})}}function U(t){let e,n,r,s,o,c,l,a,u,v,x,k,_,w,A,S,q,E,I,C,T,j,D,F,O=t[0]?"AllSky":"Weather",X=t[0]?"AllSkyCam":"WeatherCam";return x=new Q({props:{allsky:t[0]}}),{c(){var f;e=h("header"),n=h("div"),n.innerHTML='<img src="./uc-rothney.png" class="header-img"/>',r=$(),s=h("div"),o=h("h1"),c=m(O),l=m(" Timelapse"),a=$(),u=h("main"),v=h("div"),(f=x.$$.fragment)&&f.c(),k=$(),_=h("input"),w=$(),A=h("label"),S=h("h2"),q=m(X),C=$(),T=h("footer"),y(n,"class","left"),y(s,"class","right"),y(e,"class","flex-container row"),y(v,"class","player"),y(_,"type","checkbox"),y(_,"name","allsky"),y(_,"id","allsky"),y(_,"class","svelte-y8xbaa"),y(S,"class",E=i(t[0]?"text-left":"text-right")+" svelte-y8xbaa"),y(A,"for","allsky"),y(A,"class",I=" "+(t[0]?"flex-left":"flex-right")+" svelte-y8xbaa"),y(u,"class","flex-container column")},m(i,d){p(i,e,d),f(e,n),f(e,r),f(e,s),f(s,o),f(o,c),f(o,l),p(i,a,d),p(i,u,d),f(u,v),W(x,v,null),f(u,k),f(u,_),_.checked=t[0],f(u,w),f(u,A),f(A,S),f(S,q),p(i,C,d),p(i,T,d),j=!0,D||(F=g(_,"change",t[1]),D=!0)},p(t,[e]){(!j||1&e)&&O!==(O=t[0]?"AllSky":"Weather")&&b(c,O);const n={};1&e&&(n.allsky=t[0]),x.$set(n),1&e&&(_.checked=t[0]),(!j||1&e)&&X!==(X=t[0]?"AllSkyCam":"WeatherCam")&&b(q,X),(!j||1&e&&E!==(E=i(t[0]?"text-left":"text-right")+" svelte-y8xbaa"))&&y(S,"class",E),(!j||1&e&&I!==(I=" "+(t[0]?"flex-left":"flex-right")+" svelte-y8xbaa"))&&y(A,"class",I)},i(t){j||(N(x.$$.fragment,t),j=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(M.has(t))return;M.add(t),(void 0).c.push((()=>{M.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}(x.$$.fragment,t),j=!1},d(t){t&&d(e),t&&d(a),t&&d(u),L(x),t&&d(C),t&&d(T),D=!1,F()}}}function V(t,e,n){let r=!1;return[r,function(){r=this.checked,n(0,r)}]}return new class extends O{constructor(t){super(),F(this,t,V,U,o,{})}}({target:document.body,props:{}})}();
